importance: 4

---

# 加载可视化图像

假设我们有一个速度较慢的客户端，并且希望节省它们在移动端的流量。

为此，我们决定不立即显示图像，而是将其替换为占位符，如下所示：

```html
<img *!*src="placeholder.svg"*/!* width="128" height="128" *!*data-src="real.jpg"*/!*>
```

因此，最初所有图像均为 `placeholder.svg`。当页面滚动到用户可以看到图像位置时 —— 我们就会将 `src` 更改为 `data-src` 的 `src`，从而加载图像。

这是在 `iframe` 中的一个示例：

[iframe src="solution"]

滚动它可以看到图像是“按需”加载的。

要求：
- 加载页面时，屏幕上的那些图像应该在滚动之前立即加载。
- 有些图像可能是常规图像，没有 `data-src`。代码不应该改动它们。
- 一旦图像被加载，它就不应该在滚动进/出时被重新加载。

P.S. 如果你有能力，可以创建一个更高级的解决方案，以“预加载”当前位置下方/之后一页的图像。

P.P.S. 仅处理垂直滚动，不处理水平滚动。
